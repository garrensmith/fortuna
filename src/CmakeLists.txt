cmake_minimum_required(VERSION 3.15)

add_executable(hello v8hello.cpp)
target_link_libraries(hello V8_TARGET)

target_compile_features(hello PRIVATE cxx_std_14)

# This isn't quite right but can't find a better way for this to work
include_directories(${CMAKE_BINARY_DIR}/js)

add_library(js_env STATIC jsenv.h jsenv.cpp jsenv_manager.h jsenv_manager.cpp)
target_link_libraries(js_env PRIVATE V8_TARGET)

add_dependencies(js_env JS_HEADERS)

add_executable(main main.cpp V8init.h)

target_link_libraries(main PRIVATE V8_TARGET js_env)

target_compile_features(main PRIVATE cxx_std_14)
